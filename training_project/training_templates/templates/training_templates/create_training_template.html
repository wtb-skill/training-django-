<!-- templates/training_templates/create_training_template.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Create Training Template</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'training_templates/styles.css' %}">
</head>
<body>
    <h1>{% if template_id %}Edit{% else %}Create{% endif %} Training Template</h1>
    <form method="post" action="{% if template_id %}{% url 'edit_training_template' template_id=template_id %}{% else %}{% url 'create_training_template' %}{% endif %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Save</button>
    </form>

    {% if template_id and selected_exercises %}
        <h2>Selected Exercises</h2>
        <ul>
            {% for exercise_order in selected_exercises %}
                <li>
                    {{ exercise_order.exercise.name }}
                    <form method="post" action="{% url 'delete_exercise' template_id=template_id exercise_id=exercise_order.exercise.id %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit">Delete</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if template_id and exercises %}
        <h2>Add Exercises</h2>
        <form method="post" action="{% url 'add_exercise' template_id=template_id %}">
            {% csrf_token %}
            <select name="exercise">
                {% for exercise in exercises %}
                    <option value="{{ exercise.id }}">{{ exercise.name }}</option>
                {% endfor %}
            </select>
            <button type="submit">Add Exercise</button>
        </form>
    {% endif %}

    {% if request.session.template_id %}
        <form method="post" action="{% url 'finish_template' %}">
            {% csrf_token %}
            <button type="submit">Finish Template</button>
        </form>
    {% endif %}
</body>
</html>
